'use strict';

//Menu------------------------------------------------------------------------------------------------
if (document.querySelector('.header__btn-burger')) {
  var btnOpenNav = document.querySelector('.header__btn-burger'),
    btnCloseNav = document.querySelector('.header__btn-close'),
    wrapNav = document.querySelector('.header__nav-wrapper'),
    nav = document.querySelector('.header__nav');
  var openMenu = function openMenu() {
    wrapNav.classList.add('header__nav-wrapper--show');
    nav.classList.remove('animate__fadeOutRight');
    nav.classList.add('animate__fadeInRight');
    nav.classList.add('header__nav--active');
    document.body.style.overflow = 'hidden';
    setTimeout(function () {
      nav.classList.remove('animate__fadeInRight');
    }, 1000);
  };
  var closeMenu = function closeMenu() {
    nav.classList.remove('header__nav--active');
    nav.classList.remove('animate__fadeInRight');
    nav.classList.add('animate__fadeOutRight');
    document.body.style.overflow = '';
    setTimeout(function () {
      wrapNav.classList.remove('header__nav-wrapper--show');
    }, 500);
  };
  btnOpenNav.addEventListener('click', function () {
    openMenu();
  });
  wrapNav.addEventListener('click', function (e) {
    if (e.target === wrapNav && e.target !== nav) {
      closeMenu();
    }
  });
  btnCloseNav.addEventListener('click', function () {
    closeMenu();
  });
}

//Header-fix------------------------------------------------------------------------------------------------
if (document.querySelector('.header')) {
  var header = document.querySelector('.header');
  var scrollChange = 100;
  var flagHeaderFixed = false;
  var showHeader = function showHeader() {
    header.classList.add("header--fixed");
    header.classList.add("animate__fadeInDown");
    flagHeaderFixed = true;
    setTimeout(function () {
      header.classList.remove("animate__fadeInDown");
    }, 800);
  };
  var hideHeader = function hideHeader() {
    flagHeaderFixed = false;
    header.classList.remove("header--fixed");
  };
  window.addEventListener('scroll', function () {
    var scrollpos = window.scrollY;
    if (scrollpos >= scrollChange && !flagHeaderFixed) {
      showHeader();
    } else if (scrollpos < 100 && flagHeaderFixed) {
      hideHeader();
    }
  });
}

//Animate------------------------------------------------------------------------------------------------
document.addEventListener("DOMContentLoaded", function () {
  var observer = new IntersectionObserver(function (entries) {
    entries.forEach(function (entry) {
      if (entry.isIntersecting) {
        entry.target.firstElementChild.classList.add('animate__fadeInUp');
      }
    });
  });
  observer.observe(document.querySelector('.ordering'));
});

//CustomSelect------------------------------------------------------------------------------------------------
customSelect('.select', {
  containerClass: 'custom-select',
  openerClass: 'custom-select__control',
  panelClass: 'custom-select__dropdown',
  optionClass: 'custom-select__option',
  isSelectedClass: 'custom-select__option--selected',
  hasFocusClass: 'custom-select__option--focus',
  isDisabledClass: 'custom-select__option--disabled',
  isOpenClass: 'custom-select--open'
});

//Range------------------------------------------------------------------------------------------------
if (document.querySelector('#range')) {
  var rangeSlider = document.querySelector('#range');
  noUiSlider.create(rangeSlider, {
    start: [75],
    connect: true,
    range: {
      'min': [0],
      'max': [100]
    }
  });
  var rangeSliderValueElement = document.querySelector('#range-value');
  rangeSlider.noUiSlider.on('update', function (values, handle) {
    var rangeSliderValue = Math.ceil(values[handle]);
    rangeSliderValueElement.innerHTML = "".concat(rangeSliderValue, "%");
  });
}

//Input-file------------------------------------------------------------------------------------------------
if (document.querySelector('.field-file__file')) {
  var inputFile = document.querySelector('.field-file__file');
  inputFile.addEventListener('change', function (e) {
    var fileName = e.target.value.split('\\')[2];
    e.target.nextElementSibling.innerHTML = fileName;
  });
}